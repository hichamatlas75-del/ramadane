<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grey Corner - Menu Ramadan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300;400;600;700&family=Amiri:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root { --emerald: #001a14; --gold: #d4af37; --gold-light: #f9e29b; }
        
        /* STYLE MOBILE */
        body { font-family: 'Montserrat', sans-serif; background-color: var(--emerald); color: #f3f4f6; margin: 0; }
        .ornament-bg { background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l2.5 7.5L40 10l-7.5 2.5L30 20l-2.5-7.5L20 10l7.5-2.5L30 0z' fill='%23d4af37' fill-opacity='0.05'/%3E%3C/svg%3E"); }
        .glass-card { background: rgba(1, 40, 30, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(212, 175, 55, 0.2); }
        .formula-btn.active { border-color: var(--gold); background: rgba(1, 60, 45, 0.9); transform: scale(1.02); }

        #pdf-trigger {
            position: fixed; bottom: 25px; right: 25px; z-index: 100;
            background: var(--gold); color: var(--emerald);
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        /* CACHÉ SUR ÉCRAN */
        #pdf-render-zone { display: none; }
    </style>
</head>
<body class="ornament-bg">

    <button id="pdf-trigger" onclick="generatePremiumPDF()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
        </svg>
    </button>

    <div class="max-w-md mx-auto px-6 py-12">
        <header class="text-center mb-12">
            <img src="images/LOGO GC.png" alt="Logo" class="w-24 h-24 mx-auto mb-6">
            <h2 class="font-arabic text-6xl text-gold-light mb-4">رمضان كريم</h2>
            <p class="font-serif tracking-[0.3em] text-white uppercase text-sm">Grey Corner Fès</p>
        </header>

        <div class="flex flex-col gap-4 mb-10">
            <button onclick="switchFormula('seafood')" id="btn-seafood" class="formula-btn active p-6 rounded-3xl border border-gold/20 text-center">
                <span class="text-[10px] text-gold uppercase tracking-widest">Premium</span>
                <h3 class="text-xl font-serif font-bold">Mqila Fruit de Mer</h3>
                <p class="text-gold font-bold">125 DH</p>
            </button>
            <button onclick="switchFormula('meat')" id="btn-meat" class="formula-btn p-6 rounded-3xl border border-gold/10 text-center opacity-60">
                <span class="text-[10px] text-emerald-400 uppercase tracking-widest">Tradition</span>
                <h3 class="text-xl font-serif font-bold text-gray-400">Mqila Viande</h3>
                <p class="text-gray-400">105 DH</p>
            </button>
        </div>

        <div id="mobile-menu-content" class="space-y-4"></div>
    </div>

    <div id="pdf-render-zone">
        </div>

    <script>
        const menuData = {
            common: [
                { title: "L'Entrée Traditionnelle", items: ["Harira Fassie aux herbes fraîches", "Dattes Medjool & Chabakia", "Œuf dur & Briouatte aux amandes"] },
                { title: "Le Plateau de l'Artisan", items: ["Mlaoui au miel pur & Fromage frais", "Sélection de 4 salés croustillants", "Muffin Signature du Chef"] },
                { title: "Rafraîchissements", items: ["Jus d'orange frais pressé", "Lait, Eau minérale & Boisson chaude"] }
            ],
            formulas: {
                seafood: { name: "Mqila Fruit de Mer", price: "125", main: "Symphonie de la mer mijotée & Salade Veggi" },
                meat: { name: "Mqila Viande ou Merguez", price: "105", main: "Saveurs du terroir à l'œuf & Salade Veggi" }
            },
            alacarte: [
                { n: "Khlie aux œufs", p: "35" }, { n: "Mqila Merguez", p: "45" },
                { n: "Mqila Viande hachée", p: "50" }, { n: "Mqila Fruit de mer", p: "60" }
            ]
        };

        function switchFormula(id) {
            document.querySelectorAll('.formula-btn').forEach(b => b.classList.toggle('active', b.id === `btn-${id}`));
            const sections = [...menuData.common, { title: "Le Plat Signature", items: [menuData.formulas[id].main] }];
            document.getElementById('mobile-menu-content').innerHTML = sections.map(s => `
                <div class="p-6 rounded-3xl glass-card">
                    <h4 class="text-gold text-[10px] uppercase tracking-widest mb-3">${s.title}</h4>
                    ${s.items.map(i => `<p class="text-sm font-semibold mb-1">${i}</p>`).join('')}
                </div>
            `).join('');
        }

        async function generatePremiumPDF() {
            const zone = document.getElementById('pdf-render-zone');
            zone.innerHTML = '';
            zone.style.display = 'block';

            // Création des deux pages (une par formule)
            for (const key in menuData.formulas) {
                const f = menuData.formulas[key];
                const page = document.createElement('div');
                page.style.cssText = "width:210mm; height:297mm; background:#001a14; color:white; padding:20mm; box-sizing:border-box; position:relative; page-break-after:always; font-family:'Montserrat';";
                
                page.innerHTML = `
                    <div style="position:absolute; inset:10mm; border:1px solid #d4af37; opacity:0.3;"></div>
                    <div style="position:absolute; inset:12mm; border:3px solid #d4af37;"></div>

                    <div style="position:relative; z-index:10; text-align:center;">
                        <img src="images/LOGO GC.png" style="width:35mm; margin-bottom:10mm;">
                        <h1 style="font-family:'Amiri'; font-size:60pt; color:#d4af37; margin:0; line-height:1;">رمضان كريم</h1>
                        <h2 style="font-family:'Playfair Display'; font-size:22pt; letter-spacing:8px; margin:5mm 0 15mm 0;">GREY CORNER FÈS</h2>

                        <div style="border:1px solid #d4af37; display:inline-block; padding:8mm 15mm; border-radius:5mm; margin-bottom:15mm;">
                            <span style="font-size:10pt; letter-spacing:3px; display:block; color:#f9e29b; margin-bottom:2mm;">FORMULE IFTAR</span>
                            <span style="font-family:'Playfair Display'; font-size:32pt; font-weight:bold;">${f.name} — ${f.price} DH</span>
                        </div>

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15mm; text-align:left; margin-bottom:15mm;">
                            ${menuData.common.map(s => `
                                <div>
                                    <h4 style="color:#d4af37; border-bottom:1px solid #d4af37; padding-bottom:2mm; margin-bottom:4mm; font-size:12pt; text-transform:uppercase;">${s.title}</h4>
                                    ${s.items.map(i => `<p style="font-size:11pt; margin-bottom:2mm; font-weight:500;">• ${i}</p>`).join('')}
                                </div>
                            `).join('')}
                            <div>
                                <h4 style="color:#d4af37; border-bottom:1px solid #d4af37; padding-bottom:2mm; margin-bottom:4mm; font-size:12pt; text-transform:uppercase;">Le Plat Signature</h4>
                                <p style="font-size:13pt; font-weight:700; font-style:italic;">${f.main}</p>
                            </div>
                        </div>

                        <div style="background:rgba(212,175,55,0.1); padding:8mm; border-radius:4mm;">
                            <h4 style="font-size:10pt; letter-spacing:5px; margin-bottom:5mm;">À LA CARTE</h4>
                            <div style="display:flex; justify-content:center; gap:10mm; font-size:10pt;">
                                ${menuData.alacarte.map(a => `<span>${a.n} : <b>${a.p} DH</b></span>`).join('')}
                            </div>
                        </div>

                        <footer style="margin-top:15mm; font-size:12pt; color:#d4af37; font-weight:bold;">
                            RÉSERVATIONS : 0535 940 168 / 0661 446 680
                        </footer>
                    </div>
                `;
                zone.appendChild(page);
            }

            const opt = {
                margin: 0,
                filename: 'Menu_Ramadan_Grey_Corner.pdf',
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { scale: 2, useCORS: true, backgroundColor: '#001a14' },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            try {
                await html2pdf().set(opt).from(zone).save();
            } finally {
                zone.style.display = 'none';
            }
        }

        window.onload = () => switchFormula('seafood');
    </script>
</body>
</html>
